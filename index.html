<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>AI Learning Assistant (GPT + Gemini)</title>
  <style>
    body { font-family: Arial, sans-serif; background: #f4f6f9; padding:20px; }
    h1 { text-align: center; }
    .container { max-width: 800px; margin:auto; background:white; padding:20px; border-radius:10px; }
    textarea { width:100%; padding:10px; margin-bottom:10px; font-size:14px; }
    button { padding:10px 15px; margin:5px 5px 10px 0; cursor:pointer; border:none; border-radius:6px; background:#007bff; color:white; }
    button:hover { background:#0056b3; }
    .result { margin-top:15px; padding:10px; background:#f9f9f9; border-left:4px solid #007bff; border-radius:6px; white-space:pre-wrap; }
    .dual { display:flex; gap:10px; flex-wrap:wrap; }
    .dual .result { flex:1; min-width:300px; }
  </style>
</head>
<body>
  <h1>AI Learning Assistant ðŸ“š</h1>
  <div class="container">
    <textarea id="question" rows="4" placeholder="Tulis pertanyaanmu..."></textarea>
    <br>
    <button onclick="askAI('gpt')">Tanya GPT</button>
    <button onclick="askAI('gemini')">Tanya Gemini</button>
    <button onclick="askAI('both')">Bandingkan Keduanya</button>
    <div id="answers"></div>
  </div>

  <script>
    // ðŸš¨ Ganti dengan key kamu (sementara, tidak aman di frontend!)
    const GPT_API_KEY = "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";     
    const GEMINI_API_KEY = "AIzaSyAg1ahiWIFCutnF24YAyxgT_-mRvPM4fMA";      

    async function askAI(model) {
      const question = document.getElementById("question").value.trim();
      if (!question) return alert("Tulis dulu pertanyaannya!");

      document.getElementById("answers").innerHTML = "<p>Loading...</p>";

      if (model === "gpt") {
        const gpt = await fetchGPT(question);
        document.getElementById("answers").innerHTML =
          `<div class='result'><b>GPT:</b><br>${gpt}</div>`;
      }
      else if (model === "gemini") {
        const gemini = await fetchGemini(question);
        document.getElementById("answers").innerHTML =
          `<div class='result'><b>Gemini:</b><br>${gemini}</div>`;
      }
      else if (model === "both") {
        const [gpt, gemini] = await Promise.all([
          fetchGPT(question), fetchGemini(question)
        ]);
        document.getElementById("answers").innerHTML = `
          <div class="dual">
            <div class="result"><b>GPT:</b><br>${gpt}</div>
            <div class="result"><b>Gemini:</b><br>${gemini}</div>
          </div>
        `;
      }
    }

    // ðŸ”¹ GPT pakai /v1/responses
    async function fetchGPT(prompt) {
      try {
        const res = await fetch("https://api.openai.com/v1/responses", {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
            "Authorization": `Bearer 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`
          },
          body: JSON.stringify({
            model: "gpt-4o-mini",  // bisa ganti model lain: gpt-4.1-mini, gpt-4.1
            input: prompt,
            store: false
          })
        });

        const data = await res.json();
        console.log("GPT raw response:", data); // DEBUG

        if (!res.ok) {
          return `Error GPT (${res.status}): ${JSON.stringify(data)}`;
        }

        return data.output?.[0]?.content?.[0]?.text || "Tidak ada jawaban dari GPT.";
      } catch (e) {
        console.error("GPT error:", e);
        return "Error GPT: " + e.message;
      }
    }

    // ðŸ”¹ Gemini pakai /v1beta/models/...:generateContent
    async function fetchGemini(prompt) {
      try {
        const res = await fetch(
          `https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=${GEMINI_API_KEY}`,
          {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ contents: [{ parts: [{ text: prompt }] }] })
          }
        );

        const data = await res.json();
        console.log("Gemini raw response:", data); // DEBUG

        if (!res.ok) {
          return `Error Gemini (${res.status}): ${JSON.stringify(data)}`;
        }

        return data.candidates?.[0]?.content?.parts?.[0]?.text || "Tidak ada jawaban dari Gemini.";
      } catch (e) {
        console.error("Gemini error:", e);
        return "Error Gemini: " + e.message;
      }
    }
  </script>
</body>
</html>
